# Connect to janus via ssh
ssh majo3748@login.rc.colorado.edu
# then enter 1234 followed by the key on the fob

# change to the projects folder
cd /projects/majo3748/joe_occ/covariate_dist

# How to submit an MPI job in R
module load moab/moab-7.2.2
module load torque/torque-4.2.3
module load openmpi/openmpi-1.6.4_gcc-4.7.2_torque-4.2.3_ib

qsub -q janus-debug mpitest.sh

# check status
showq -r -u majo3748

# final? run
# want 1000 iterations, at 7-10 minutes per iteration
# if we have 7 nodes, each with 12 cores, we have 84 nodes
# if each of 84 cores does 12 iterations, we have 1008 iterations
# this should take ~ 2 hours

# change mpitest.sh and mpitest.r to reflect these numbers

qsub -q janus-short mpitest.sh



# interactive job
module load moab/moab-7.2.2
module load torque/torque-4.2.3
qsub -I -q janus-long -l nodes=1:ppn=1

module load R/r-3.0.1
cd /projects/majo3748/joe_occ/covariate_dist
R # started at 3:48


## installing stuff 
wget URL_of_file XXX.tar.gz
tar xzf XXX.tar.gz

LDLFLAGS="-L/projects/majo3748/joe_occ/lapack-3.5.0"
F77=gfortran

module load gcc/gcc-4.8.2
module load lapack/lapack-3.4.2
cd build
../configure --prefix=/projects/majo3748/joe_occ/JAGS-3.4.0/build --disable-shared
make clean
make install


module load mkl/mkl-11.0.0
